<div class="renovar-container">
  <h2>Renovar Suscripción</h2>

  <!-- Buscar usuario -->
  <div class="buscar">
    <input type="text" placeholder="Ingrese CI del usuario" [(ngModel)]="ciUsuario" />
    <button (click)="buscarUsuario()">Buscar</button>
  </div>

  <div *ngIf="mensaje" class="mensaje">{{ mensaje }}</div>

  <!-- Datos usuario y suscripción -->
  <div *ngIf="usuario">
    <h3>{{ usuario.nombre }} {{ usuario.apellido }}</h3>
    <p><strong>CI:</strong> {{ usuario.ci }}</p>

    <div *ngIf="suscripcionActual">
      <p><strong>Última suscripción:</strong> {{ suscripcionActual.tipo }} | 
         Inicio: {{ suscripcionActual.fechaInicio | date:'yyyy-MM-dd' }} | 
         Fin: {{ suscripcionActual.fechaFin | date:'yyyy-MM-dd' }} | 
         Activa: {{ suscripcionActual.activa ? 'Sí' : 'No' }}
      </p>
    </div>

    <div class="form-renovar">
      <label>Tipo de nuevo plan:</label>
      <select [(ngModel)]="tipoNuevoPlan" (change)="calcularFechaFin()">
        <option value="MENSUAL">Mensual</option>
        <option value="TRIMESTRAL">Trimestral</option>
        <option value="ANUAL">Anual</option>
      </select>

      <label>Fecha inicio:</label>
      <input type="date" [(ngModel)]="fechaInicioNueva" (change)="calcularFechaFin()" />

      <label>Fecha fin:</label>
      <input type="date" [(ngModel)]="fechaFinNueva" />
    </div>

    <button (click)="renovar()">Renovar Suscripción</button>
  </div>
</div>
